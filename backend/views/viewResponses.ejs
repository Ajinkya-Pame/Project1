<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Responses | SendMate</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
    <div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-md rounded-lg">
        <h1 class="text-2xl font-bold text-center mb-6 text-gray-800">Traveller Responses</h1>

        <% if (responses.length===0) { %>
            <p class="text-center text-gray-500">No responses yet.</p>
            <% } else { %>
                <% responses.forEach(response=> { %>
                    <div class="mb-4 p-4 bg-gray-50 border rounded">
                        <p><strong>Traveller:</strong>
                            <%= response.travellerId.username %> (<%= response.travellerId.email %>)
                        </p>
                        <p><strong>Message:</strong>
                            <%= response.message %>
                        </p>
                        <p><strong>Proposed Date:</strong>
                            <%= response.estimatedDelivery?.toLocaleDateString() %>
                        </p>
                        <p><strong>Proposed Price:</strong> â‚¹<%= response.priceOffer %>
                        </p>
                        <p><strong>Status:</strong>
                            <span class="inline-block px-2 py-1 rounded bg-gray-200">
                                <%= response.status %>
                            </span>
                        </p>

                        <% if (response.status==='pending' ) { %>
                            <form action="/acceptResponse/<%= response._id %>" method="POST" class="mt-2">
                                <button type="submit"
                                    class="bg-green-600 text-white py-1 px-4 rounded hover:bg-green-700">Accept</button>
                            </form>
                            <% } %>
                            <form action="/chat/<%= response._id %>" method="POST" class="mt-2">
                                <button type="submit" class="bg-green-600 text-white py-1 px-4 rounded hover:bg-green-700">Chat</button>
                            </form>
                    </div>
                    <% }) %>
                        <% } %>
    </div>
</body>

</html>